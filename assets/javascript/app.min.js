angular.module("Sales",["ngRoute","ngResource","ngSanitize","smoothScroll"]).config(function(){}),angular.module("Sales").config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{redirectTo:"/home"}).when("/home",{templateUrl:"templates/home/index.html"})}]),angular.module("Sales").directive("carouselSlick",["$timeout",function($timeout){return{scope:{},restrict:"A",link:function(scope,element,attrs){$timeout(function(){$(element).slick({autoplay:attrs.autoplay,arrows:!0,dots:attrs.dots||!1,lazyLoad:attrs.lazyload||"progressive",speed:attrs.speed||2e3,pauseOnHover:!0,infinite:!0,slidesToShow:attrs.slides,responsive:[{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),element.find("button").text(""),element.find(".slick-next").append('<svg viewBox="0 0 144 144" preserveAspectRatio="xMidYMid meet"title="Play next track"class="icon--controls"><use xlink:href="images/icon--controls.svg#next-icon"></use></svg>'),element.find(".slick-prev").append('<svg viewBox="0 0 144 144" preserveAspectRatio="xMidYMid meet"title="Play next track"class="icon--controls"><use xlink:href="images/icon--controls.svg#prev-icon"></use></svg>')})}}}]),angular.module("Sales").directive("foundationInit",["$timeout",function($timeout){return{link:function(scope,element,attrs){$timeout(function(){$(element).foundation(function(){console.log("runnin foundation")}),$(element).foundation("interchange",{named_queries:{childBear:"only screen and (min-width: 100px)",teenBear:"only screen and (min-width: 760px)",mamaBear:"only screen and (min-width: 900px)"}}),$(element).foundation("interchange","reflow")})}}}]),angular.module("Sales").directive("ssAudioPlayer",function(){return{replace:!0,restrict:"E",scope:!0,require:"^ssPageTheme",templateUrl:"templates/directives/ssAudioPlayer.tpl.html",controller:["$scope",function($scope){$scope.placeHolderText="Play music below",$scope.loadingText="Loading track..."}],link:function(scope,element,attrs,ssPageTheme){scope.currentSong=scope.placeHolderText,scope.changeTheme=function(pThemeName){ssPageTheme.changeTheme(pThemeName)},$controls=element.find(".controls");var scplayer=new SoundCloudPlayer(["https://soundcloud.com/sales/jamz","https://soundcloud.com/sales/big-sis","https://soundcloud.com/sales/sales-renee","https://soundcloud.com/sales/vow","https://soundcloud.com/sales/chinese-new-year","https://soundcloud.com/sales/getting-it-on","https://soundcloud.com/sales/toto","https://soundcloud.com/sales/toto-xxyyxx-remix/"],{consumer_key:"7a6e6123d37c58d267bdfa4d526e554c",autoplay:!1,toggle_pause:!0,preload:!1,cache:!0,loop:!0,debug:!1}),hasNotPlayed=!0,changeTheme=function(){scope.isPlaying=!0,scope.currentSong=scope.loadingText,scope.$apply(),scplayer.track_info(scplayer.track_index()).done(function(track){scope.currentSong=track.title,scope.changeTheme(track.permalink),scope.$apply()})};$controls.on("click","button",function(e){e.preventDefault();var $this=jQuery(this);if($this.hasClass("play"))scplayer.pause();else if($this.hasClass("pause")){if(hasNotPlayed===!0)return changeTheme(),hasNotPlayed=!1,void setTimeout(function(){scplayer.pause()},1e3);scplayer.pause()}else $this.hasClass("stop")?(scplayer.stop(),$controls.find(".play").addClass("pause"),$controls.find(".pause").removeClass("play")):$this.hasClass("next")?(scplayer.next(),$controls.find(".pause")&&($controls.find(".pause").addClass("play"),$controls.find(".play").removeClass("pause"),$controls.find(".play").click())):$this.hasClass("prev")&&(scplayer.prev(),$controls.find(".pause")&&($controls.find(".pause").addClass("play"),$controls.find(".play").removeClass("pause"),$controls.find(".play").click()))}),scplayer.on("scplayer.pause",function(e,is_paused){is_paused===!0?($controls.find(".play").addClass("pause"),$controls.find(".pause").removeClass("play")):($controls.find(".pause").addClass("play"),$controls.find(".play").removeClass("pause"))}),scplayer.on("scplayer.changing_track",function(e,index){hasNotPlayed!==!0&&changeTheme()})}}}),angular.module("Sales").directive("ssBlogPostsCarousel",[function(){return{replace:!0,restrict:"E",templateUrl:"templates/directives/ssBlogPostsCarousel.tpl.html",scope:{},link:function(scope,element,attrs){$(document).foundation("reveal","reflow"),$(document).on("close.fndtn.reveal","[data-reveal]",function(){setTimeout(function(){scope.selectedPost={},scope.$apply()},1e3)}),scope.selectBlogPost=function(pPost){scope.selectedPost=pPost,angular.element("#modal").foundation("reveal","open")}},controller:["$scope","Blog",function($scope,Blog){$scope.selectedPost={},$scope.posts=Blog.getPosts()}]}}]),angular.module("Sales").directive("ssImgProperties",function(){return{restrict:"A",link:function(scope,element,attr){element.on("load",function(){var w=$(this).width(),h=$(this).height();attr.$set("width",w),attr.$set("height",h)})}}}),angular.module("Sales").directive("ssPageFooter",function(){return{replace:!0,restrict:"E",scope:{},templateUrl:"templates/directives/ssPageFooter.tpl.html"}}),angular.module("Sales").directive("ssPageNav",function(){return{replace:!0,restrict:"E",scope:{},templateUrl:"templates/directives/ssPageNav.tpl.html"}}),angular.module("Sales").directive("ssPageTheme",function(){return{restrict:"A",controller:["$scope",function($scope){$scope.defaultTheme="jamz",$scope.currentTheme=$scope.defaultTheme,this.changeTheme=function(pTheme){$scope.currentTheme=pTheme},this.getCurrentTheme=function(){return $scope.currentTheme}}],controllerAs:"ssPageTheme"}}),angular.module("Sales").directive("ssPageThemeBackgrounds",["$timeout","Theme",function($timeout,Theme){return{restrict:"E",scope:{},require:"^ssPageTheme",templateUrl:"templates/directives/ssPageThemeBackgrounds.tpl.html",link:function(scope,element,attrs,ssPageTheme){scope.component=attrs.component,scope.loaded=!1,scope.backgrounds=Theme.getThemes(),scope.isActive=function(pBackground){return ssPageTheme.getCurrentTheme()===pBackground}}}}]),angular.module("Sales").directive("ssShowsList",function(){return{replace:!0,restrict:"E",scope:{},templateUrl:"templates/directives/ssShowsList.tpl.html",controller:"showsController",controllerAs:"showsController",link:function(scope,element,attr){scope.showsLimit=20,scope.viewingAllShows=!1,scope.showAllShows=function(){scope.loading=!0,scope.viewingAllShows=!0,setTimeout(function(){scope.showsLimit=scope.events.length,scope.loading=!1},800)},scope.isNotFestival=function(eventName){return"Concert"===eventName}}}}),angular.module("Sales").directive("ssSmallMainNav",function(){return{replace:!0,restrict:"E",templateUrl:"templates/directives/ssSmallMainNav.tpl.html",scope:{},link:function(scope,element,attrs){scope.toggleNav=function(){element.find("div.mainNav-menu").toggleClass("is-showing")}}}}),angular.module("Sales").directive("ssSpinner",["$interval",function($interval){return{replace:!0,restrict:"E",templateUrl:"templates/directives/ssSpinner.tpl.html",scope:{},link:function(scope,element,attrs){var loadingText=["Loading","Loading.","Loading..","Loading..."],currentText=0;scope.spinner={text:"Loading"},scope.changeText=function(pSpinner,pText,index){pSpinner.text=pText[index]},$interval(function(){currentText===loadingText.length&&(currentText=0),scope.changeText(scope.spinner,loadingText,currentText),currentText++},500)}}}]),angular.module("Sales").directive("ssVideoCarousel",function(){return{replace:!0,restrict:"E",templateUrl:"templates/directives/ssVideoCarousel.tpl.html"}}),angular.module("Sales").controller("blogController",["$scope","$location",function($scope,$location){$scope.posts=[{title:"WEST COAST SUMMER 2015",date:"June 1st, 2015",thumbnail:"https://scontent-atl1-1.xx.fbcdn.net/hphotos-xfa1/t31.0-8/10548057_826259747456624_3660037826613998656_o.jpg",body:"We Emoticono heart ya'll so much, we can't stay away. We are pleased to announce the following west coast tour dates: http://on.fb.me/<1QkZvb6></1QkZvb6>**The Echo show is ALL AGES / Soda Bar 21+**"},{title:"SALES from 12 to 12",date:"May 14th, 2015",thumbnail:"https://s3.amazonaws.com/salessite/SALES_from12_to_12.jpg",body:"big movie voice* This fall, two best friends will make the journey of a lifetime across the Atlantic Ocean in search of more cuisine, more ears, and more friends. Europe this fall, yall! Tour poster by Alana Questell"},{title:"EUROPEAN TOUR 2015",date:"May 2nd, 2015",thumbnail:"https://scontent-atl1-1.xx.fbcdn.net/hphotos-xpt1/t31.0-8/p526x296/11263107_816216705127595_9028048071337470597_o.jpg"}]}]),angular.module("Sales").controller("showsController",["Shows","$scope","$window","smoothScroll",function(Shows,$scope,$window,smoothScroll){$scope.search={},$scope.events={},$scope.loaded=!1,Shows.getShows().success(function(pData){$scope.loaded=!0,$scope.events=pData.resultsPage.results.event}),$scope.navigateToTickets=function(ticketLink){$window.open(ticketLink,"_blank")}}]),angular.module("Sales").factory("Blog",function(){var posts=[{title:"WEST COAST SUMMER 2015",date:"June 1st, 2015",thumbnail:"https://s3.amazonaws.com/salessite/SALES_West_Coast_2015.jpg",mainImage:"https://s3.amazonaws.com/salessite/SALES_West_Coast_2015_header.png",id:"west",body:'We love ya\'ll so much, we can\'t stay away. We are pleased to announce the following west coast tour dates: <a href="http://on.fb.me/1QkZvb6" target="_blank">http://on.fb.me/1QkZvb6</a>'},{title:"SALES from 12 to 12",date:"May 14th, 2015",thumbnail:"https://s3.amazonaws.com/salessite/SALES_from12_to_12.jpg",mainImage:"https://s3.amazonaws.com/salessite/SALES_from12_to_12.jpg",id:"sales",body:'<b>We are excited</b>  to share our first video series with you. This three-part video series is the brainchild of Josef Lorenzo (director) and was made possible by the work of Harryson Thevenin (audio) and Alana Questell (animation). Looking forward to getting to meet you this fall.  <p>Videos + tour dates below.<p><p> Love, <br>Lauren & Jordan <br><3 SALES <3</p> <p>P.S. There are three (3) videos in the series, <a href="https://www.youtube.com/playlist?list=PLLCdbcMe7pOxqSypUt40sbbqX9WX2h8DP" target="_blank">click here</a> for movie magic.</p>'},{title:"EUROPEAN TOUR 2015",date:"May 2nd, 2015",thumbnail:"https://s3.amazonaws.com/salessite/SALES_EU_2015.jpg",mainImage:"https://s3.amazonaws.com/salessite/SALES_EU_2015_header.png",id:"european",body:'<p>Hey Friends! It\'s been fun touring the U.S. and Canada, but we are really excited about our upcoming <b>2015 European Tour</b> this Fall. We will spend a whole month touring Europe and will hopefully get to meet you. Until that beautiful day when we cross the Atlantic Ocean into your arms, we will be spending the next few months in our home studio (bedroom) working on a full length album.</p><p>Event page & tickets here: <a href="http://on.fb.me/1Ixmkrq" target="_blank">http://on.fb.me/1Ixmkrq</a></p>'}];return{getPosts:function(){return posts}}}),angular.module("Sales").factory("Shows",["$http",function($http){return{getShows:function(){return $http.jsonp("http://api.songkick.com/api/3.0/artists/7225704-sales/calendar.json?apikey=u3T0xdtx4AOTUzFw&jsoncallback=JSON_CALLBACK")}}}]),angular.module("Sales").factory("Theme",function(){var themes=[{name:"getting-it-on"},{name:"ep"},{name:"sales-renee"},{name:"vow"},{name:"toto"},{name:"chinese-new-year"},{name:"toto-xxyyxx-remix"},{name:"big-sis"},{name:"jamz"}];return{getThemes:function(){return themes}}});